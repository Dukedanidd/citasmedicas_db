{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/arman/ISC/citasmedicas_db/app/%28auth%29/login/page.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { motion } from \"framer-motion\"\r\nimport { Eye, EyeOff, Mail, Lock, Stethoscope, Heart, Shield } from \"lucide-react\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter()\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setError(\"\")\r\n\r\n    try {\r\n      console.log('[LOGIN PAGE] Iniciando proceso de login...')\r\n      console.log('[LOGIN PAGE] Datos del formulario:', { email, password: '***' })\r\n      \r\n      const res = await fetch(\"/api/auth/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n      })\r\n\r\n      console.log('[LOGIN PAGE] Status de la respuesta:', res.status)\r\n      console.log('[LOGIN PAGE] Headers de la respuesta:', Object.fromEntries(res.headers.entries()))\r\n\r\n      const data = await res.json()\r\n      console.log('[LOGIN PAGE] Respuesta del servidor:', data)\r\n\r\n      if (data.error) {\r\n        console.log('[LOGIN PAGE] Error recibido:', data.error)\r\n        setError(data.error)\r\n        setIsLoading(false)\r\n        return\r\n      }\r\n\r\n      // Guardar información del usuario en sessionStorage\r\n      if (data.user && data.user.id) {\r\n        console.log('[LOGIN PAGE] Guardando información del usuario:', data.user.id)\r\n        sessionStorage.setItem('user_id', data.user.id.toString())\r\n        sessionStorage.setItem('user_email', data.user.email)\r\n        sessionStorage.setItem('user_role', data.user.role_id.toString())\r\n      }\r\n\r\n      // Verificar que tenemos una ruta de redirección\r\n      if (!data.redirectTo) {\r\n        console.error('[LOGIN PAGE] No se recibió ruta de redirección en la respuesta:', data)\r\n        setError('Error en la configuración de redirección')\r\n        setIsLoading(false)\r\n        return\r\n      }\r\n\r\n      console.log('[LOGIN PAGE] Redirigiendo a:', data.redirectTo)\r\n      \r\n      // Usar router.push para la redirección\r\n      router.push(data.redirectTo)\r\n      \r\n    } catch (error) {\r\n      console.error('[LOGIN PAGE] Error durante el login:', error)\r\n      console.error('[LOGIN PAGE] Stack trace:', error.stack)\r\n      setError(\"Error al iniciar sesión\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const containerVariants = {\r\n    hidden: { opacity: 0, y: 50 },\r\n    visible: {\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: {\r\n        duration: 0.6,\r\n        staggerChildren: 0.1,\r\n      },\r\n    },\r\n  }\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: {\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: { duration: 0.5 },\r\n    },\r\n  }\r\n\r\n  const floatingVariants = {\r\n    animate: {\r\n      y: [-10, 10, -10],\r\n      transition: {\r\n        duration: 4,\r\n        repeat: Number.POSITIVE_INFINITY,\r\n        ease: \"easeInOut\",\r\n      },\r\n    },\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-sky-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4 relative overflow-hidden\">\r\n      {/* Elementos decorativos flotantes */}\r\n      <motion.div variants={floatingVariants} animate=\"animate\" className=\"absolute top-20 left-20 text-sky-200\">\r\n        <Heart size={40} />\r\n      </motion.div>\r\n\r\n      <motion.div\r\n        variants={floatingVariants}\r\n        animate=\"animate\"\r\n        className=\"absolute top-40 right-32 text-blue-200\"\r\n        style={{ animationDelay: \"1s\" }}\r\n      >\r\n        <Stethoscope size={35} />\r\n      </motion.div>\r\n\r\n      <motion.div\r\n        variants={floatingVariants}\r\n        animate=\"animate\"\r\n        className=\"absolute bottom-32 left-40 text-indigo-200\"\r\n        style={{ animationDelay: \"2s\" }}\r\n      >\r\n        <Shield size={30} />\r\n      </motion.div>\r\n\r\n      {/* Contenedor principal */}\r\n      <motion.div variants={containerVariants} initial=\"hidden\" animate=\"visible\" className=\"w-full max-w-sm\">\r\n        {/* Tarjeta de login */}\r\n        <motion.div\r\n          variants={itemVariants}\r\n          className=\"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-sky-100 p-6 relative\"\r\n        >\r\n          {/* Header */}\r\n          <motion.div variants={itemVariants} className=\"text-center mb-6\">\r\n            <motion.div\r\n              whileHover={{ scale: 1.05 }}\r\n              className=\"w-16 h-16 bg-gradient-to-br from-sky-400 to-blue-500 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-lg\"\r\n            >\r\n              <Stethoscope className=\"text-white\" size={28} />\r\n            </motion.div>\r\n            <h1 className=\"text-2xl font-bold text-slate-800 mb-1\">MediCare Pro</h1>\r\n            <p className=\"text-sm text-slate-600\">Sistema de Gestión Médica</p>\r\n          </motion.div>\r\n\r\n          {/* Formulario */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Campo Email */}\r\n            <motion.div variants={itemVariants}>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Correo Electrónico</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-sky-400\" size={18} />\r\n                <motion.input\r\n                  whileFocus={{ scale: 1.02 }}\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-3 bg-sky-50/50 border border-sky-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent transition-all duration-300 text-slate-800 placeholder-slate-400\"\r\n                  placeholder=\"doctor@medicare.com\"\r\n                  required\r\n                />\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Campo Contraseña */}\r\n            <motion.div variants={itemVariants}>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Contraseña</label>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-sky-400\" size={18} />\r\n                <motion.input\r\n                  whileFocus={{ scale: 1.02 }}\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"w-full pl-10 pr-10 py-3 bg-sky-50/50 border border-sky-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent transition-all duration-300 text-slate-800 placeholder-slate-400\"\r\n                  placeholder=\"••••••••\"\r\n                  required\r\n                />\r\n                <motion.button\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-sky-400 hover:text-sky-600 transition-colors\"\r\n                >\r\n                  {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\r\n                </motion.button>\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* Recordar y Olvidé contraseña */}\r\n            <motion.div variants={itemVariants} className=\"flex items-center justify-between\">\r\n              <label className=\"flex items-center\">\r\n                <motion.input\r\n                  whileHover={{ scale: 1.05 }}\r\n                  type=\"checkbox\"\r\n                  className=\"w-4 h-4 text-sky-500 bg-sky-50 border-sky-300 rounded focus:ring-sky-400 focus:ring-2\"\r\n                />\r\n                <span className=\"ml-2 text-xs text-slate-600\">Recordarme</span>\r\n              </label>\r\n              <motion.a\r\n                whileHover={{ scale: 1.05 }}\r\n                href=\"#\"\r\n                className=\"text-xs text-sky-500 hover:text-sky-700 transition-colors\"\r\n              >\r\n                ¿Olvidaste tu contraseña?\r\n              </motion.a>\r\n            </motion.div>\r\n\r\n            {/* Botón de login */}\r\n            <motion.div variants={itemVariants}>\r\n              <motion.button\r\n                whileHover={{ scale: 1.02 }}\r\n                whileTap={{ scale: 0.98 }}\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full bg-gradient-to-r from-sky-400 to-blue-500 text-white py-3 rounded-xl font-semibold text-base shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed relative overflow-hidden mt-2\"\r\n              >\r\n                {isLoading ? (\r\n                  <motion.div\r\n                    animate={{ rotate: 360 }}\r\n                    transition={{ duration: 1, repeat: Number.POSITIVE_INFINITY, ease: \"linear\" }}\r\n                    className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full mx-auto\"\r\n                  />\r\n                ) : (\r\n                  \"Iniciar Sesión\"\r\n                )}\r\n              </motion.button>\r\n            </motion.div>\r\n\r\n            {error && (\r\n              <div className=\"text-red-500 text-sm text-center\">\r\n                {error}\r\n              </div>\r\n            )}\r\n          </form>\r\n        </motion.div>\r\n\r\n        {/* Información adicional */}\r\n        <motion.div variants={itemVariants} className=\"mt-4 text-center text-xs text-slate-500\">\r\n          <div className=\"flex items-center justify-center space-x-4\">\r\n            <div className=\"flex items-center\">\r\n              <Shield size={14} className=\"mr-1 text-sky-400\" />\r\n              <span>Cifrado SSL</span>\r\n            </div>\r\n            <div className=\"flex items-center\">\r\n              <Heart size={14} className=\"mr-1 text-sky-400\" />\r\n              <span>HIPAA Compliant</span>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 569, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}